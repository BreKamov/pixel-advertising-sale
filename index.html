<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vendita Pixel 500k</title>
<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
        background-color: #f8f8f8;
        margin: 0;
        padding: 0;
    }
    header {
        background-color: #333;
        color: white;
        padding: 20px 0;
    }
    h1 { margin: 0; }
    canvas {
        border: 1px solid #333;
        margin-top: 20px;
        image-rendering: pixelated;
    }
    .instructions { margin: 20px 0; font-size: 1.2em; }
    .buy-button {
        display: inline-block;
        padding: 12px 25px;
        font-size: 1.2em;
        color: white;
        background-color: #ff6600;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        text-decoration: none;
        margin-top: 10px;
    }
    .buy-button:hover { background-color: #e65c00; }
    .total { font-size: 1.2em; margin-top: 10px; }
    footer { margin-top: 30px; padding: 20px; background-color: #333; color: white; }
</style>
</head>
<body>

<header>
    <h1>Compra i tuoi Pixel!</h1>
</header>

<p class="instructions">Clicca sul canvas per selezionare i pixel. Ogni pixel costa 0,10€.</p>

<canvas id="pixelCanvas" width="1000" height="500"></canvas>

<div class="total" id="total">Totale: 0 €</div>
<a href="#" class="buy-button" id="buyButton">Acquista Pixel Selezionati</a>

<footer>
    &copy; 2025 Vendita Pixel. Tutti i diritti riservati.
</footer>

<script>
const canvas = document.getElementById('pixelCanvas');
const ctx = canvas.getContext('2d');

const pixelSize = 1;
const pricePerPixel = 0.10; // Prezzo aggiornato
const selectedPixels = new Set();
const totalEl = document.getElementById('total');

// Inizializza canvas grigio
ctx.fillStyle = '#ddd';
ctx.fillRect(0, 0, canvas.width, canvas.height);

// Aggiorna totale
function updateTotal() {
    const total = selectedPixels.size * pricePerPixel;
    totalEl.textContent = `Totale: ${total.toFixed(2)} €`;
}

// Click sui pixel
canvas.addEventListener('click', (e) => {
    const rect = canvas.getBoundingClientRect();
    const x = Math.floor((e.clientX - rect.left) / pixelSize);
    const y = Math.floor((e.clientY - rect.top) / pixelSize);
    const key = `${x},${y}`;

    if (selectedPixels.has(key)) {
        selectedPixels.delete(key);
        ctx.fillStyle = '#ddd';
    } else {
        selectedPixels.add(key);
        ctx.fillStyle = '#ff6600';
    }
    ctx.fillRect(x * pixelSize, y * pixelSize, pixelSize, pixelSize);
    updateTotal();
});

// Pulsante PayPal
document.getElementById('buyButton').addEventListener('click', () => {
    if (selectedPixels.size === 0) {
        alert('Seleziona almeno un pixel prima di acquistare.');
        return;
    }
    const total = (selectedPixels.size * pricePerPixel).toFixed(2);
    
    // Inserisci qui il tuo ID commerciante PayPal
    const paypalBusiness = "tuoemail@example.com"; 

    // Crea URL PayPal per pagamento singolo
    const paypalURL = `https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=${encodeURIComponent(paypalBusiness)}&item_name=Pixel+Art&amount=${total}&currency_code=EUR`;

    window.open(paypalURL, '_blank');
});
</script>

</body>
</html>
